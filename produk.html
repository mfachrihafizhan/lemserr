<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Produk - Lemon Sereh</title>
  <link rel="stylesheet" href="style.css" />
</head>

<!-- Customer Service -->
<div id="cs-popup" class="cs-popup">
  <a href="https://wa.me/6282112291916" target="_blank" class="cs-popup-btn">
    ğŸŸ¢CS
  </a>
</div>

<body>
  <!-- Hamburger -->
  <div id="sidebarToggle" class="sidebar-hamburger">
    <svg width="40" height="40" viewBox="0 0 40 40">
      <rect y="9" width="32" height="5" rx="2.2" fill="#454545"/>
      <rect y="19" width="32" height="5" rx="2.2" fill="#454545"/>
      <rect y="29" width="32" height="5" rx="2.2" fill="#454545"/>
    </svg>
  </div>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar">
    <div class="sidebar-pen"></div>
    <nav class="sidebar-menu">
      <a href="index.html" class="sidebar-link">
        <span class="sidebar-icon">ğŸ </span><span class="sidebar-text">Profil</span>
      </a>
      <a href="tentang.html" class="sidebar-link">
        <span class="sidebar-icon">â„¹ï¸</span><span class="sidebar-text">Tentang</span>
      </a>
      <a href="produk.html" class="sidebar-link">
        <span class="sidebar-icon">ğŸ›’</span><span class="sidebar-text">Produk</span>
      </a>
      <a href="order.html" class="sidebar-link">
        <span class="sidebar-icon">ğŸ“</span><span class="sidebar-text">Order</span>
      </a>
      <a href="ulasan.html" class="sidebar-link">
        <span class="sidebar-icon">â­</span><span class="sidebar-text">Ulasan</span>
      </a>
      <a href="auth.html" id="btn-login-open" class="sidebar-link">
        <span class="sidebar-icon">ğŸ”‘</span><span class="sidebar-text">Login</span>
      </a>
      <a href="#" id="btn-logout" class="sidebar-link" style="display:none;">
        <span class="sidebar-icon">ğŸšª</span><span class="sidebar-text">Logout</span>
      </a>
      <a href="profil.html" id="btn-profil" class="sidebar-link" style="display:none;">
        <span class="sidebar-icon">ğŸ‘¤</span><span class="sidebar-text">Profil</span>
      </a>
    </nav>
  </aside>

  <main>
    <section class="card produk-main">
  <h2 style="color:#705900">Produk Kami</h2>

  <!-- PRODUK 1 -->
  <div class="produk">
    <div class="produk-card"
         data-produk-id="large"
         data-nama="Lemon Sereh - Cup Large"
         data-harga="12000">
      <h3>Lemon Sereh - Cup Large</h3>
      <p>Minuman segar beraroma lemon dan sereh.</p>
      <div class="produk-qty-control">
        <button type="button" class="btn-qty-minus">-</button>
        <span class="produk-qty-val">0</span>
        <button type="button" class="btn-qty-plus">+</button>
      </div>
    </div>
  </div>

  <!-- PRODUK 2 -->
  <div class="produk">
    <div class="produk-card"
         data-produk-id="medium"
         data-nama="Lemon Sereh - Cup Medium"
         data-harga="8000">
      <h3>Lemon Sereh - Cup Medium</h3>
      <p>Porsi medium, rasa tetap segar.</p>
      <div class="produk-qty-control">
        <button type="button" class="btn-qty-minus">-</button>
        <span class="produk-qty-val">0</span>
        <button type="button" class="btn-qty-plus">+</button>
      </div>
    </div>
  </div>

  <!-- PRODUK 3 -->
  <div class="produk">
    <div class="produk-card"
         data-produk-id="small"
         data-nama="Lemon Sereh - Cup Small"
         data-harga="6000">
      <h3>Lemon Sereh - Cup Small</h3>
      <p>Porsi kecil praktis untuk dinikmati.</p>
      <div class="produk-qty-control">
        <button type="button" class="btn-qty-minus">-</button>
        <span class="produk-qty-val">0</span>
        <button type="button" class="btn-qty-plus">+</button>
      </div>
    </div>
  </div>

  <!-- SATU TOMBOL UNTUK SEMUA -->
  <div class="produk-footer">
  <button type="button" id="btn-add-all" class="btn-cart-main">
    Masuk Keranjang
  </button>
</div>

</section>


  <!-- SCRIPT SIDEBAR -->
  <script>
    const sidebar = document.getElementById("sidebar");
    const toggleBtn = document.getElementById("sidebarToggle");

    toggleBtn.onclick = function (e) {
      sidebar.classList.toggle("active");
      e.stopPropagation();
    };

    document.addEventListener("click", function (e) {
      if (
        window.innerWidth < 600 &&
        !sidebar.contains(e.target) &&
        !toggleBtn.contains(e.target)
      ) {
        sidebar.classList.remove("active");
      }
    });
  </script>

  <!-- LOGIC AUTH + ORDER (LOCALSTORAGE) -->
<script src="app.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (typeof updateAuthUI === "function") {
      updateAuthUI();
    }

    const cards = document.querySelectorAll(".produk-card");

    // handle plus/minus per card
    cards.forEach(card => {
      const minusBtn = card.querySelector(".btn-qty-minus");
      const plusBtn = card.querySelector(".btn-qty-plus");
      const qtySpan = card.querySelector(".produk-qty-val");

      minusBtn.addEventListener("click", () => {
        let qty = Number(qtySpan.textContent) || 0;
        if (qty > 0) qty--;
        qtySpan.textContent = qty;
      });

      plusBtn.addEventListener("click", () => {
        let qty = Number(qtySpan.textContent) || 0;
        qty++;
        qtySpan.textContent = qty;
      });
    });

    // tombol Masuk Keranjang tunggal
    const btnAddAll = document.getElementById("btn-add-all");
    btnAddAll.addEventListener("click", () => {
      const currentUser =
        typeof getCurrentUser === "function" ? getCurrentUser() : null;
      if (!currentUser) {
        alert("Silakan login terlebih dahulu sebelum memesan.");
        window.location.href = "auth.html";
        return;
      }

      let adaYangDipilih = false;

      cards.forEach(card => {
        const nama = card.dataset.nama;
        const harga = Number(card.dataset.harga);
        const qtySpan = card.querySelector(".produk-qty-val");
        const qty = Number(qtySpan.textContent) || 0;

        if (qty > 0) {
          adaYangDipilih = true;
          const total = harga * qty;
          if (typeof addOrder === "function") {
            addOrder(nama, qty, total);
          }
        }
      });

      if (!adaYangDipilih) {
        alert("Belum ada jumlah pesanan yang diatur.");
        return;
      }

      alert("Keranjang diperbarui. Silakan cek di halaman Order.");
      // kalau mau langsung ke keranjang:
      window.location.href = "order.html";
    });
  });
</script>
</body>
</html>
